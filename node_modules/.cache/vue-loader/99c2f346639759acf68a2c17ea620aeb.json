{"remainingRequest":"C:\\Users\\Boison Chang\\Desktop\\connesia_cli_vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\Boison Chang\\Desktop\\connesia_cli_vue\\src\\components\\comm\\TEditor.vue?vue&type=template&id=59356024","dependencies":[{"path":"C:\\Users\\Boison Chang\\Desktop\\connesia_cli_vue\\src\\components\\comm\\TEditor.vue","mtime":1649655915708},{"path":"C:\\Users\\Boison Chang\\Desktop\\connesia_cli_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Boison Chang\\Desktop\\connesia_cli_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Boison Chang\\Desktop\\connesia_cli_vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":499162500000},{"path":"C:\\Users\\Boison Chang\\Desktop\\connesia_cli_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Boison Chang\\Desktop\\connesia_cli_vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogIDxkaXYgY2xhc3M9InRpbnltY2UtZWRpdG9yIj4NCiAgICA8RWRpdG9yDQogICAgICA6aWQ9InRpbnltY2VJZCINCiAgICAgIHYtbW9kZWw9Im15VmFsdWUiDQogICAgICA6aW5pdD0iaW5pdCINCiAgICAgIDpkaXNhYmxlZD0iZGlzYWJsZWQiDQogICAgICBAb25DbGljaz0ib25DbGljayINCiAgICAvPg0KICA8L2Rpdj4NCg=="},{"version":3,"sources":["C:\\Users\\Boison Chang\\Desktop\\connesia_cli_vue\\src\\components\\comm\\TEditor.vue"],"names":[],"mappings":";EACE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACzB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACJ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAChB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACnB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACnB,CAAC;EACH,CAAC,CAAC,CAAC,CAAC,CAAC","file":"C:/Users/Boison Chang/Desktop/connesia_cli_vue/src/components/comm/TEditor.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <div class=\"tinymce-editor\">\r\n    <Editor\r\n      :id=\"tinymceId\"\r\n      v-model=\"myValue\"\r\n      :init=\"init\"\r\n      :disabled=\"disabled\"\r\n      @onClick=\"onClick\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport tinymce from 'tinymce/tinymce' // tinymce默认hidden，不引入不显示\r\nimport Editor from '@tinymce/tinymce-vue' // 编辑器引入\r\nimport 'tinymce/themes/silver/theme' // 编辑器主题\r\nimport 'tinymce/icons/default' // 引入编辑器图标icon，不引入则不显示对应图标\r\n\r\nimport 'tinymce/plugins/advlist' // 高级列表\r\nimport 'tinymce/plugins/autolink' // 自动链接\r\nimport 'tinymce/plugins/link' // 超链接\r\nimport 'tinymce/plugins/image' // 插入编辑图片\r\nimport 'tinymce/plugins/lists' // 列表插件\r\nimport 'tinymce/plugins/charmap' // 特殊字符\r\nimport 'tinymce/plugins/media' // 插入编辑媒体\r\nimport 'tinymce/plugins/wordcount' // 字数统计\r\n// import 'tinymce/plugins/axupimgs'\r\n\r\nconst fonts = [\r\n  '宋体=宋体',\r\n  '微软雅黑=微软雅黑',\r\n  '新宋体=新宋体',\r\n  '黑体=黑体',\r\n  '楷体=楷体',\r\n  '隶书=隶书',\r\n  'Courier New=courier new,courier',\r\n  'AkrutiKndPadmini=Akpdmi-n',\r\n  'Andale Mono=andale mono,times',\r\n  'Arial=arial,helvetica,sans-serif',\r\n  'Arial Black=arial black,avant garde',\r\n  'Book Antiqua=book antiqua,palatino',\r\n  'Comic Sans MS=comic sans ms,sans-serif',\r\n  'Courier New=courier new,courier',\r\n  'Georgia=georgia,palatino',\r\n  'Helvetica=helvetica',\r\n  'Impact=impact,chicago',\r\n  'Symbol=symbol',\r\n  'Tahoma=tahoma,arial,helvetica,sans-serif',\r\n  'Terminal=terminal,monaco',\r\n  'Times New Roman=times new roman,times',\r\n  'Trebuchet MS=trebuchet ms,geneva',\r\n  'Verdana=verdana,geneva',\r\n  'Webdings=webdings',\r\n  'Wingdings=wingdings,zapf dingbats'\r\n]\r\nexport default {\r\n  components: {\r\n    Editor\r\n  },\r\n  props: {\r\n    // 内容\r\n    value: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    tinymceId: {\r\n      type: String,\r\n      default: 'tinymce'\r\n    },\r\n    // 是否禁用\r\n    disabled: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    // 插件\r\n    plugins: {\r\n      type: [String, Array],\r\n      default: 'advlist autolink link image lists charmap  media wordcount'\r\n    },\r\n    // 工具栏\r\n    toolbar: {\r\n      type: [String, Array],\r\n      default:\r\n        'undo redo |  formatselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | lists image media table'\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      myValue: this.value,\r\n      init: {\r\n        selector: '#tinymce',\r\n        language_url: process.env.VUE_APP_BASE_PUBLIC_URL + '/tinymce/langs/zh-cn.js', // 汉化路径是自定义的，一般放在public或static里面\r\n        language: 'zh_CN',\r\n        skin_url: process.env.VUE_APP_BASE_PUBLIC_URL + '/tinymce/skins/', // 皮肤\r\n        plugins: this.plugins, // 插件\r\n        toolbar: this.toolbar,// 工具栏\r\n        toolbar_location: '/',\r\n        fontsize_formats:\r\n          '12px 14px 16px 18px 20px 22px 24px 28px 32px 36px 48px 56px 72px', // 字体大小\r\n        font_formats: fonts.join(';'),\r\n        height: 500, // 高度\r\n        placeholder: '在这里输入文字',\r\n        branding: false, // 隐藏右下角技术支持\r\n        // 图片上传\r\n        images_upload_handler: function(blobInfo, success, failure) {\r\n          // 文件上传的formData传递\r\n          console.info(blobInfo.blob(), '<--blobInfo', blobInfo.blob().name)\r\n          const isAccord =\r\n            blobInfo.blob().type === 'image/jpeg' ||\r\n            blobInfo.blob().type === 'image/png' ||\r\n            blobInfo.blob().type === 'image/GIF' ||\r\n            blobInfo.blob().type === 'image/jpg' ||\r\n            blobInfo.blob().type === 'image/BMP'\r\n          if (blobInfo.blob().size / 1024 / 1024 > 2) {\r\n            failure('上传失败，图片大小请控制在 2M 以内')\r\n          } else if (blobInfo.blob().type === isAccord) {\r\n            failure('图片格式错误')\r\n          } else {\r\n          \t//上传图片-转本地富文本展示的图片功能--根据需求（非必须）\r\n            const formData = new FormData()\r\n            // 服务端接收文件的参数名，文件数据，文件名\r\n            // blob转file\r\n            const file = new File([blobInfo.blob()], blobInfo.blob().name, { lastModified: Date.now(), type: blobInfo.blob().type })\r\n            formData.append('file', file)\r\n            axios.post(process.env.VUE_APP_BASE_API + '/productImage/uploadRichImage.do', formData, {\r\n              'Content-Type': 'multipart/form-data',\r\n              withCredentials: true\r\n            }, { timeout: 60000 }).then(res => {\r\n              const { flag, datas, msg } = res.data\r\n              if (flag) { // 这里返回的是图片的地址\r\n                success('//pic12.secooimg.com/'+ datas)\r\n              } else {\r\n                failure(msg || '上传失败1')\r\n              }\r\n            })\r\n              .catch(() => {\r\n                failure('上传失败2')\r\n              })\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    // 监听内容变化\r\n    value(newValue) {\r\n      this.myValue = newValue == null ? '' : newValue\r\n    },\r\n    myValue(newValue) {\r\n      if (this.triggerChange) {\r\n        this.$emit('change', newValue)\r\n      } else {\r\n        this.$emit('input', newValue)\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    tinymce.init({})\r\n  },\r\n  methods: {\r\n    onClick(e) {\r\n      this.$emit('onClick', e, tinymce)\r\n    },\r\n    // 可以添加一些自己的自定义事件，如清空内容\r\n    clear() {\r\n      this.myValue = ''\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n"]}]}