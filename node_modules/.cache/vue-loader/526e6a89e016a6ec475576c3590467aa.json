{"remainingRequest":"C:\\Users\\Boison Chang\\Desktop\\connesia_cli_vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\Boison Chang\\Desktop\\connesia_cli_vue\\src\\components\\messagecontent.vue?vue&type=style&index=0&id=9bceb0bc&scoped=true&lang=css","dependencies":[{"path":"C:\\Users\\Boison Chang\\Desktop\\connesia_cli_vue\\src\\components\\messagecontent.vue","mtime":1649655161355},{"path":"C:\\Users\\Boison Chang\\Desktop\\connesia_cli_vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Boison Chang\\Desktop\\connesia_cli_vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Boison Chang\\Desktop\\connesia_cli_vue\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Boison Chang\\Desktop\\connesia_cli_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Boison Chang\\Desktop\\connesia_cli_vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoubnVtLWxvYWRpbmd7DQogIGhlaWdodDogMjRweDsNCiAgd2lkdGg6IDI0cHg7DQogIGJhY2tncm91bmQ6ICNmZmY7DQogIGJvcmRlci1yYWRpdXM6IDUwJTsNCiAgYm9yZGVyOiAxcHggc29saWQgIzFEOUFGMjsNCiAgYm9yZGVyLXRvcDogMnB4IHNvbGlkICNmZmY7DQogIGFuaW1hdGlvbjogc3Bpbm5lcjEgNjAwbXMgbGluZWFyIGluZmluaXRlOw0KICAtbW96LWFuaW1hdGlvbjogc3Bpbm5lcjEgNjAwbXMgbGluZWFyIGluZmluaXRlOw0KICAtd2Via2l0LWFuaW1hdGlvbjogc3Bpbm5lcjEgNjAwbXMgbGluZWFyIGluZmluaXRlOw0KICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgdG9wOiA1MCU7DQogIGxlZnQ6IDUwJTsNCiAgei1pbmRleDogMTAwMDsNCn0NCkBrZXlmcmFtZXMgc3Bpbm5lcjEgew0KICB0byB7DQogICAgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsNCiAgICAtbW96LXRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7DQogICAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOw0KICB9DQp9DQouZy1jLTMwMHsNCiAgY29sb3I6ICNmZjczMDA7DQp9DQoubm90aWMtYm94ew0KICBjb2xvcjogI2ZmNzMwMDsNCiAgbWFyZ2luLXRvcDogNXB4Ow0KfQ0KLnJsUG9wdXB7DQogIHBvc2l0aW9uOiBmaXhlZDsNCiAgd2lkdGg6IDEwMCU7DQogIGhlaWdodDogMTAwJTsNCiAgdG9wOiAwOw0KICBsZWZ0OiAwOw0KICByaWdodDogMDsNCiAgYm90dG9tOiAwOw0KICBiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLDAuNSk7DQogIHotaW5kZXg6IDk5OTsNCn0NCi5ybC1pbm5lcnsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KICB0b3A6IDUwJTsNCiAgbGVmdDogNTAlOw0KICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLC01MCUpOw0KICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsLTUwJSk7DQogIHdpZHRoOiAzMjBweDsNCiAgaGVpZ2h0OiAxNTRweDsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjsNCiAgYm9yZGVyLXJhZGl1czogMTBweDsNCiAgb3ZlcmZsb3c6IGhpZGRlbjsNCn0NCi5wb3AtdHh0ew0KICBoZWlnaHQ6IDExNHB4Ow0KICBwYWRkaW5nOiAzMnB4IDI0cHggMCAyNHB4Ow0KICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2Y5ZjlmOTsNCn0NCi5wb3AtYnRuew0KICBoZWlnaHQ6IDQwcHg7DQp9DQoucG9wLWF7DQogIHdpZHRoOiAxNjBweDsNCiAgaGVpZ2h0OiA0MHB4Ow0KICBkaXNwbGF5OiBibG9jazsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KICBsaW5lLWhlaWdodDogNDBweDsNCiAgZmxvYXQ6IGxlZnQ7DQp9DQouY2FuY2VsLWJ0bnsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzQwOWVmZTsNCiAgY29sb3I6ICNmZmY7DQogIC8qYm9yZGVyLXJhZGl1czogMCAwIDEwcHggMDsqLw0KfQ0KLmNhbmNlbC1idG46aG92ZXJ7DQogIGJhY2tncm91bmQtY29sb3I6ICMzOTk2ZjY7DQp9DQo="},{"version":3,"sources":["C:\\Users\\Boison Chang\\Desktop\\connesia_cli_vue\\src\\components\\messagecontent.vue"],"names":[],"mappings":"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","file":"C:/Users/Boison Chang/Desktop/connesia_cli_vue/src/components/messagecontent.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <div>\r\n    <el-upload\r\n      style=\"display: none\"\r\n      class=\"fwb-avatar-uploader\"\r\n      id=\"upload_img\"\r\n      action=\"\"\r\n      name=\"img\"\r\n      :auto-upload=\"false\"\r\n      :show-file-list=\"false\"\r\n      :before-upload=\"fbeforeUpload\"\r\n      :on-change=\"fhandleAvatarChange\"\r\n      :on-success=\"fuploadSuccess\"\r\n    ></el-upload>\r\n    <div class=\"tinymce-editor\" style=\"position: relative;\">\r\n      <em class=\"num-loading\" v-show=\"Imgloading\"></em>\r\n      <editor v-model=\"myValue\"\r\n              :init=\"init\"\r\n              :disabled=\"disabled\"\r\n              @onKeyUp=\"onImgQuery\"\r\n              @onPaste=\"onImgQuery\"\r\n              @onClick=\"onClick\">\r\n      </editor>\r\n      <div class=\"rlPopup\" v-if=\"imgPovp\">\r\n        <div class=\"rl-inner\">\r\n          <div class=\"g-c-33 g-fz-16 pop-txt\">\r\n            <p>图片不能超过30张</p>\r\n          </div>\r\n          <div class=\"pop-btn\">\r\n            <a href=\"javascript:;\" class=\"pop-a edit-btn g-c-33\" @click=\"imgPovp = false\">返回</a>\r\n            <a href=\"javascript:;\" class=\"pop-a cancel-btn\" @click=\"imgPovp = false\">我知道了</a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import { uploadImg,uploadOOS} from '@/api/single'\r\n// import _get from 'lodash.get'\r\nimport tinymce from 'tinymce/tinymce'\r\nimport Editor from '@tinymce/tinymce-vue'\r\nimport 'tinymce/themes/silver/theme'\r\nimport 'tinymce/plugins/image'\r\nimport 'tinymce/plugins/table'\r\nimport 'tinymce/plugins/lists'\r\nimport 'tinymce/plugins/wordcount'\r\nimport 'tinymce/plugins/colorpicker'\r\nimport 'tinymce/plugins/code'\r\nimport 'tinymce/plugins/paste'\r\nexport default {\r\n  components: {\r\n    Editor\r\n  },\r\n  props: {\r\n    //传入一个value，使组件支持v-model绑定\r\n    value: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    disabled: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    plugins: {\r\n      type: [String, Array],\r\n      default: 'lists table wordcount code image'\r\n    },\r\n    toolbar1: {\r\n      type: [String, Array],\r\n      default: 'undo redo | code | fontsizeselect | fontselect | styleselect | bold italic underline | bullist numlist outdent indent | uploadimg table'\r\n    },\r\n    toolbar2: {\r\n      type: [String, Array],\r\n      default: 'alignleft aligncenter alignright alignjustify | forecolor backcolor | removeformat'\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      updateImg:null,\r\n      Imgloading:false,\r\n      imgPovp:false,\r\n      //初始化配置\r\n      init: {\r\n        language_url: '/tinymce/langs/zh_CN.js', /*vue3.x 的路径/tinymce/langs/zh_CN.js ，vue2.x的路径/static/tinymce/langs/zh_CN.js*/\r\n        language: 'zh_CN',\r\n        skin_url: '/tinymce/skins/ui/oxide',\r\n        height: 600,\r\n        width:810,\r\n        plugins: this.plugins,\r\n        toolbar1: this.toolbar1,\r\n        toolbar2: this.toolbar2,\r\n        branding: false,\r\n        menubar: false,\r\n        statusbar: false, // 隐藏编辑器底部的状态栏\r\n        // image_description: false,\r\n        // image_dimensions: false,\r\n        // image_title: false,\r\n        // image_uploadtab: false,本地上传图片\r\n        paste_data_images: true,/*是否允许粘贴图片*/\r\n        setup: function (editor) {  /*自定义上传图片按钮*/\r\n          editor.ui.registry.addButton('uploadimg', {\r\n            icon: \"image\",\r\n            tooltip: \"上传图片\",\r\n            onAction: function (_) {\r\n              document.querySelector(\"#upload_img input\").click();\r\n            }\r\n          });\r\n        },\r\n        //如需ajax上传可参考https://www.tiny.cloud/docs/configure/file-image-upload/#images_upload_handler\r\n        /*上传到oss*/\r\n        images_upload_handler: (blobInfo, success, failure) => { /*没有自定义上传按钮，用他本身的时候用这里的上传*/\r\n          let time = Date.parse(new Date())\r\n          let that = this\r\n          if(blobInfo.blob().size / 1024 / 1024 > 1 ){\r\n            failure('上传图片不能超过1M!');\r\n          }\r\n          if(blobInfo.blob().type !== \"image/jpeg\"){\r\n            failure('上传图片只能是 JPG 格式!');\r\n          }\r\n          if(that.imgNum >= that.totalImg){\r\n            failure('图片不能超过30张!')\r\n          }\r\n          let img = new Image();\r\n          img.src = \"data:\"+blobInfo.blob().type+\";base64,\"+blobInfo.base64();\r\n          img.onload = function(){\r\n            // console.log(img.width, img.height);\r\n            if (img.width < 500  || img.height < 500) failure('上传图片分辨率不能低于500*500!');\r\n            that.imgNum +=1\r\n            uploadImg().then(res => {\r\n              const form = new FormData()\r\n              form.append('policy', _get(res, 'data.policy'))\r\n              form.append('OSSAccessKeyId', _get(res, 'data.accessid'))\r\n              form.append('signature', _get(res, 'data.signature'))\r\n              form.append('key', `${_get(res, 'data.dir')}${_get(res, 'data.key')}${'_'}${time}${'.jpg'}`)\r\n              form.append('success_action_status', 200)\r\n              form.append('file', blobInfo.blob(), blobInfo.filename())\r\n              that.updateImg = (process.env.OSS_URL + '/' + `${_get(res, 'data.dir')}${_get(res, 'data.key')}${'_'}${time}${'.jpg'}`)\r\n              that.$http.post(process.env.OSS_URL, form).then(resp => {\r\n                success(that.updateImg)\r\n              }).catch(err => {\r\n                failure('网络错误，请稍后再试！')\r\n                console.log(err);\r\n              })\r\n            }).catch(err => {\r\n              failure('网络错误，请稍后再试！')\r\n              console.log(err);\r\n            })\r\n          }\r\n          /*const img = 'data:image/jpeg;base64,' + blobInfo.base64()\r\n          success(img)\r\n          console.log(success);*/\r\n        }\r\n      },\r\n      myValue: this.value,\r\n      totalImg:30,\r\n      imgNum:0,\r\n      uploadImgList:[],\r\n      isUpload: false,\r\n    }\r\n  },\r\n  mounted() {\r\n    tinymce.init({})\r\n  },\r\n  methods: {\r\n    //添加相关的事件，可用的事件参照文档=> https://github.com/tinymce/tinymce-vue => All available events\r\n    //需要什么事件可以自己增加\r\n    onClick(e) {\r\n      this.$emit('onClick', e, tinymce)\r\n    },\r\n    //可以添加一些自己的自定义事件，如清空内容\r\n    clear() {\r\n      this.myValue = ''\r\n    },\r\n    onImgQuery(){\r\n      /*获取所有的img*/\r\n      let imgList = document.getElementsByTagName('iframe')[0].contentWindow.document.querySelectorAll(\"#tinymce img\")\r\n      if(this.imgNum > imgList.length) this.imgNum = imgList.length //针对用户删除图片\r\n      if(this.isUpload) return\r\n      //console.log(this.imgNum)\r\n      let that = this\r\n      let isErr = false\r\n      if(imgList.length > 0){\r\n        for(const i in imgList){\r\n          if(imgList[i].src&&(imgList[i].src.indexOf(\"taoic\") == -1 )){\r\n            that.imgNum += 1\r\n            //console.log(that.imgNum)\r\n            if(that.imgNum > that.totalImg){\r\n              imgList[i].remove()\r\n              that.imgNum -= 1\r\n              isErr = true\r\n            } else {\r\n              that.uploadImgList.push(imgList[i].src)\r\n            }\r\n          }\r\n        }\r\n        if (that.uploadImgList.length >0){\r\n          that.UploadOOSImg()\r\n        }\r\n        if (isErr) that.imgPovp = true;\r\n      }\r\n    },\r\n    UploadOOSImg(){\r\n      let that = this\r\n      that.isUpload = true\r\n      uploadOOS(that.uploadImgList.join(\"-\")).then(res => {\r\n        if(res.code == 1){\r\n          let imgList = document.getElementsByTagName('iframe')[0].contentWindow.document.querySelectorAll(\"#tinymce img\")\r\n          let uploadImgList = that.uploadImgList\r\n          for(const i in imgList){\r\n            for(const j in uploadImgList){\r\n              if(imgList[i].src ==  uploadImgList[j]){ //对应上\r\n                imgList[i].src = res.Data[j]\r\n              }\r\n            }\r\n          }\r\n        }\r\n        that.isUpload = false\r\n        that.uploadImgList = [];\r\n      }).catch(err => {\r\n        that.isUpload = false\r\n        that.uploadImgList = [];\r\n      })\r\n    },\r\n    async fbeforeUpload(file) {\r\n      // console.log(file);\r\n    },\r\n    fuploadSuccess(res, file) {\r\n      // console.log(\"成功\" + res);\r\n    },\r\n    /*上传阿里云*/\r\n    async fhandleAvatarChange(file) {\r\n      let that = this\r\n      if (!file) {\r\n        return\r\n      }\r\n      if(this.imgNum >= this.totalImg){\r\n        that.imgPovp = true;\r\n        return false;\r\n      }\r\n      // this.imgNum +=1\r\n      const isJPG  = 'image/jpeg';\r\n      const isLt1M = file.raw.size / 1024 / 1024 < 1;\r\n      if(file.raw.type !== isJPG){\r\n        this.$message.error('上传图片只能是 JPG 格式!');\r\n        return false;\r\n      }\r\n      if(!isLt1M){\r\n        this.$message.error('上传图片不能超过1M!');\r\n        return false;\r\n      }\r\n      that.Imgloading = true\r\n      // let img = new Image();\r\n      // img.src =  URL.createObjectURL(file.raw);\r\n      // img.onload = function() {\r\n      //   that.Imgloading = true\r\n      // console.log(img.width);\r\n      // console.log(img.width, img.height);\r\n      /* if (img.width < 500 || img.height < 500) {\r\n         that.$message.error('上传图片分辨率不能低于500*500!');\r\n         that.Imgloading = false\r\n         return false\r\n       }*/\r\n      uploadImg().then(resp => {\r\n        if(resp.code == 1){\r\n          let time = Date.parse(new Date())\r\n          const form = new FormData()\r\n          form.append('policy', _get(resp, 'data.policy'))\r\n          form.append('OSSAccessKeyId', _get(resp, 'data.accessid'))\r\n          form.append('signature', _get(resp, 'data.signature'))\r\n          form.append('key', `${_get(resp, 'data.dir')}${_get(resp, 'data.key')}${'_'}${time}${'.jpg'}`)\r\n          form.append('success_action_status', 200)\r\n          form.append('file', file.raw)\r\n          that.$http.post(process.env.OSS_URL, form).then(res => {\r\n            if(res.status == 200){\r\n              that.imgNum += 1\r\n              that.Imgloading = false\r\n              that.updateImg = (process.env.OSS_URL + '/' + `${_get(resp, 'data.dir')}${_get(resp, 'data.key')}${'_'}${time}${'.jpg'}`)\r\n              // 插入图片  res.url为服务器返回的图片地址\r\n              let dom = tinymce.activeEditor.dom;\r\n              tinyMCE.execCommand(\"mceInsertContent\",false,dom.createHTML(\"img\", {src: that.updateImg}));\r\n            }else {\r\n              that.$message.error('网络错误，请稍后再试！');\r\n            }\r\n          }).catch(err => {\r\n            console.log(err);\r\n          })\r\n        }else {\r\n          that.$message.error('网络错误，请稍后再试！');\r\n        }\r\n      }).catch(err => {\r\n        console.log(err);\r\n      })\r\n      // }\r\n    },\r\n  },\r\n  watch: {\r\n    value(newValue) {\r\n      this.myValue = newValue\r\n    },\r\n    myValue(newValue) {\r\n      this.$emit('input', newValue)\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n<style scoped>\r\n.num-loading{\r\n  height: 24px;\r\n  width: 24px;\r\n  background: #fff;\r\n  border-radius: 50%;\r\n  border: 1px solid #1D9AF2;\r\n  border-top: 2px solid #fff;\r\n  animation: spinner1 600ms linear infinite;\r\n  -moz-animation: spinner1 600ms linear infinite;\r\n  -webkit-animation: spinner1 600ms linear infinite;\r\n  display: inline-block;\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  z-index: 1000;\r\n}\r\n@keyframes spinner1 {\r\n  to {\r\n    transform: rotate(360deg);\r\n    -moz-transform: rotate(360deg);\r\n    -webkit-transform: rotate(360deg);\r\n  }\r\n}\r\n.g-c-300{\r\n  color: #ff7300;\r\n}\r\n.notic-box{\r\n  color: #ff7300;\r\n  margin-top: 5px;\r\n}\r\n.rlPopup{\r\n  position: fixed;\r\n  width: 100%;\r\n  height: 100%;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0,0,0,0.5);\r\n  z-index: 999;\r\n}\r\n.rl-inner{\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%,-50%);\r\n  -webkit-transform: translate(-50%,-50%);\r\n  width: 320px;\r\n  height: 154px;\r\n  background-color: #ffffff;\r\n  border-radius: 10px;\r\n  overflow: hidden;\r\n}\r\n.pop-txt{\r\n  height: 114px;\r\n  padding: 32px 24px 0 24px;\r\n  border-bottom: 1px solid #f9f9f9;\r\n}\r\n.pop-btn{\r\n  height: 40px;\r\n}\r\n.pop-a{\r\n  width: 160px;\r\n  height: 40px;\r\n  display: block;\r\n  text-align: center;\r\n  line-height: 40px;\r\n  float: left;\r\n}\r\n.cancel-btn{\r\n  background-color: #409efe;\r\n  color: #fff;\r\n  /*border-radius: 0 0 10px 0;*/\r\n}\r\n.cancel-btn:hover{\r\n  background-color: #3996f6;\r\n}\r\n</style>"]}]}